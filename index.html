<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFFINIXIA | Sovereign Core</title>
    <style>
        body { background: #000; color: #d4af37; font-family: sans-serif; padding: 20px; }
        .card { border: 1px solid #222; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        #chat { height: 300px; overflow-y: auto; border: 1px solid #111; padding: 10px; margin-bottom: 10px; }
        input { width: 70%; padding: 10px; background: #111; color: #fff; border: 1px solid #333; }
        button { padding: 10px; background: #d4af37; color: #000; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <h1>AFFINIXIA CORE</h1>
    <div class="card">
        <strong>Manufor Glory Ebube</strong> (Chief Architect)<br>
        <strong>Emmanuel Opoke Obinna</strong> (The Brain / Co-Founder)
    </div>
    <div id="chat">Welcome. Type a message to begin.</div>
    <input type="text" id="userInput" placeholder="Ask the AI...">
    <button onclick="askAI()">SEND</button>

    <script>
        const TOKEN = "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";
        
        async function askAI() {
            const input = document.getElementById('userInput');
            const chat = document.getElementById('chat');
            const userText = input.value;
            if(!userText) return;

            chat.innerHTML += `<p style="color:white"><b>User:</b> ${userText}</p>`;
            input.value = "";
            const loading = document.createElement('p');
            loading.innerText = "Affinixia is thinking...";
            chat.appendChild(loading);

            try {
                const response = await fetch("https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2", {
                    method: "POST",
                    headers: { 
                        "Authorization": `Bearer ${TOKEN}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ inputs: userText })
                });

                const data = await response.json();
                loading.remove();
                
                // This handles the Hugging Face response format correctly
                const aiResponse = data[0].generated_text || data.generated_text || "Core response error.";
                chat.innerHTML += `<p><b>Affinixia:</b> ${aiResponse}</p>`;
                chat.scrollTop = chat.scrollHeight;

            } catch (error) {
                loading.innerText = "Bridge Error: Still blocked. Please check Netlify Logs.";
                console.error(error);
            }
        }
    </script>
</body>
</html>

